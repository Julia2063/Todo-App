(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c,a=n(0),l=n(32),o=(n(41),n(42),n(43),n(12)),r=n(2),i=n(30),d=n(6),s=n(4);function u(e,t){var n=Object(a.useState)((function(){try{return JSON.parse(localStorage.getItem(e))||t}catch(n){return t}})),c=Object(s.a)(n,2),l=c[0],o=c[1];return[l,function(t){o(t),localStorage.setItem(e,JSON.stringify(t))}]}!function(e){e.ALL="All",e.ACTIVE="Active",e.COMPLETED="Completed"}(c||(c={}));var j=n(50),h=n(49),b=n(25),f=n.n(b),O=n(3),m=function(e){var t=e.todo,n=e.handleToggle,c=e.handleDelete,l=e.changedTitleTodoId,o=e.handleEdit,r=e.newEditedTitle,i=e.handleInputChange,d=e.handleBlur,s=e.handleKeyDown,u=t.id,j=t.title,h=t.completed,b=Object(a.useRef)(null);return Object(a.useEffect)((function(){b.current&&b.current.focus()}),[l]),Object(O.jsxs)("li",{className:f()({editing:l===u,completed:h}),children:[Object(O.jsxs)("div",{className:"view",children:[Object(O.jsx)("input",{name:"".concat(u),type:"checkbox",className:"toggle",id:"toggle-view",onChange:n,checked:h}),Object(O.jsx)("label",{id:"".concat(u),title:j,onDoubleClick:o,children:j}),Object(O.jsx)("button",{name:"".concat(u),type:"button",className:"destroy","data-cy":"deleteTodo","aria-label":"Mute volume",onClick:c})]}),Object(O.jsx)("input",{type:"text",className:"edit",value:r,ref:b,onChange:function(e){return i(e,"updateTittle")},onBlur:d,onKeyDown:s,placeholder:"Empty todo will be deleted"})]},u)},p=function(e){var t=e.todos,n=e.handleToggle,c=e.handleDelete,a=e.changedTitleTodoId,l=e.handleEdit,o=e.newEditedTitle,r=e.handleInputChange,i=e.handleBlur,d=e.handleKeyDown;return Object(O.jsx)("ul",{className:"todo-list","data-cy":"todosList",children:Object(O.jsx)(j.a,{children:t.map((function(e){return Object(O.jsx)(h.a,{timeout:300,classNames:"item",children:Object(O.jsx)(m,{todo:e,handleToggle:n,handleDelete:c,changedTitleTodoId:a,handleEdit:l,newEditedTitle:o,handleInputChange:r,handleBlur:i,handleKeyDown:d})},e.id)}))})})},g=Object.values(c),x=function(){return Object(O.jsx)("ul",{className:"filters","data-cy":"todosFilter",children:g.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"All"===e?"/":"../".concat(e.toLowerCase()),className:function(e){var t=e.isActive;return f()({selected:t})},children:e})},e)}))})},v=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],l=t[1],o=u("todos",[]),j=Object(s.a)(o,2),h=j[0],b=j[1],f=u("todos",[]),m=Object(s.a)(f,2),g=m[0],v=m[1],T=Object(a.useState)(null),y=Object(s.a)(T,2),E=y[0],w=y[1],C=Object(r.o)().status,N=Object(a.useMemo)((function(){return g.filter((function(e){return!e.completed})).length}),[g]),D=Object(a.useState)(!1),I=Object(s.a)(D,2),k=I[0],L=I[1],S=Object(a.useState)(""),A=Object(s.a)(S,2),M=A[0],B=A[1];Object(a.useEffect)((function(){L(0===N)}),[N]);var K=Object(a.useMemo)((function(){return g.filter((function(e){return e.completed}))}),[g]),J=function(e,t){var n=e.target.value;"newTodo"===t&&l(n),"updateTittle"===t&&B(n)};Object(a.useEffect)((function(){var e=g.filter((function(e){switch(C){case c.ACTIVE.toLowerCase():return!e.completed;case c.COMPLETED.toLowerCase():return e.completed;default:return e}}));b(e)}),[C,g,k]);var F=function(e){var t=g.findIndex((function(t){return t.id===e})),n=g.filter((function(e,n){return n!==t}));b(n),v(n)},P=function(){var e=h.find((function(e){return e.id===E}));if(M!==(null===e||void 0===e?void 0:e.title)){if(0===M.length&&E)return F(E),void w(null);e&&(e.title=M,b(Object(d.a)(h)),v(Object(d.a)(h))),w(null)}else w(null)};return Object(O.jsxs)("div",{className:"todoapp",children:[Object(O.jsxs)("header",{className:"header",children:[Object(O.jsx)("h1",{children:"todos"}),Object(O.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=n.trim();if(0!==t.length){var c,a=(c=t,{id:+new Date,title:c,completed:!1}),o=g?[].concat(Object(d.a)(g),[a]):[a];b(o),v(o),l("")}else l("")},children:Object(O.jsx)("input",{type:"text","data-cy":"createTodo",className:"new-todo",placeholder:"What needs to be done?",value:n,onChange:function(e){return J(e,"newTodo")}})})]}),Object(O.jsxs)("section",{className:"main",children:[g.length>0&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all","data-cy":"toggleAll",checked:k,onChange:function(){var e=g.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{completed:!k})}));b(e),v(e)}}),Object(O.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"})]}),Object(O.jsx)(p,{todos:h,handleToggle:function(e){var t=e.target.name,n=h.find((function(e){return e.id===+t}));n&&(n.completed=!n.completed),b(Object(d.a)(h)),v(Object(d.a)(g))},handleDelete:function(e){var t=e.currentTarget.name;F(+t)},changedTitleTodoId:E,handleEdit:function(e){var t,n=e.currentTarget,c=n.id,a=n.title,l=null===(t=h.find((function(e){return e.id===+c})))||void 0===t?void 0:t.id;w(l),B(a)},newEditedTitle:M,handleInputChange:J,handleBlur:function(){P()},handleKeyDown:function(e){"Escape"!==e.code&&"Enter"!==e.code&&"NumpadEnter"!==e.code||P()}})]}),(g.length>0&&h.length>0||g.length>0||C===c.COMPLETED.toLowerCase()&&0===K.length&&g.length>0)&&Object(O.jsxs)("footer",{className:"footer",children:[Object(O.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:"".concat(N," items left")}),Object(O.jsx)(x,{}),K.length>0&&Object(O.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){var e=g.filter((function(e){return!e.completed}));b(e),v(e)},children:"Clear completed"})]})]})},T=function(){return Object(O.jsx)(r.c,{children:Object(O.jsxs)(r.a,{path:"/",children:[Object(O.jsx)(r.a,{index:!0,element:Object(O.jsx)(v,{})}),Object(O.jsx)(r.a,{path:":status",element:Object(O.jsx)(v,{})})]})})},y=function(){return Object(O.jsx)(o.a,{children:Object(O.jsx)(T,{})})};Object(l.createRoot)(document.getElementById("root")).render(Object(O.jsx)(y,{}))}},[[47,1,2]]]);
//# sourceMappingURL=main.c7667d79.chunk.js.map